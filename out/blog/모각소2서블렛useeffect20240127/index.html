<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>아주대 모각소 2일차 - useEffect는 2번 렌더링을 한다. &amp; 잡다<!-- --> - 블로그</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/5602aa092c7bcc8b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5602aa092c7bcc8b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-3c9b553960c0fed5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-87cee5540118d1b4.js" defer=""></script><script src="/_next/static/chunks/996-80bd74c565659df8.js" defer=""></script><script src="/_next/static/chunks/531-58fe6cbf0d1069ee.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-989a8d1ae7a65113.js" defer=""></script><script src="/_next/static/yXdILxIRu_8nEiVWUUPT_/_buildManifest.js" defer=""></script><script src="/_next/static/yXdILxIRu_8nEiVWUUPT_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="blog-content"><a class="back-link" href="/home/">← 목록으로</a><h1>아주대 모각소 2일차 - useEffect는 2번 렌더링을 한다. &amp; 잡다</h1><div class="meta">2024년 01월 28일</div><div><p>글 게시물이 나오도록 코드를 짠 부분에서, 게시물이 중복되어서 나온다는 현상이 발생되었다.</p>
<p>글 게시물을 여러개 나오도록 하는 것에 초점을 맞춰 만들어서, 중복되는지 몰랐는데 운 좋게 팀원이 발견해주었다.</p>
<p><img src="./screenshot1.png" alt="스크린샷1"></p>
<p>현재 db 상에 방 게시물 데이터가 4개 밖에 안 올렸는데, 아래에 방 더보기 버튼이 생겨서 눌러보았더니,</p>
<p><img src="./screenshot2.png" alt="스크린샷2"></p>
<p>이렇게 똑같은 방이 또 떠버린다.
왜 그런 것인가?</p>
<p>처음에 방 정보가 없을 때에도 방을 불러올 수 있도록 useEffect에서 방 정보를 가져오는 코드를 넣어놓았었다.
그래서 데이터를 살펴보기 위해 useEffect 안에 console.log 로 찍어보니, console.log 여러번 수행이 되는 것을 확인할 수 있었다.</p>
<p><img src="./screenshot3.png" alt="스크린샷3"></p>
<p>뭔가 이상한 듯 하여 인터넷에 &quot;리액트 useEffect 2번 돌아감&quot; 이런 느낌으로 검색해보니 strict 모드를 했을 때, 리액트 개발 모드로 돌려서 보면 useEffect가 여러번 호출된다는 것이다.</p>
<p>그래서 <code>npm start</code>가 아닌, <code>npm run build</code>로 돌린 후 index.html로 확인해보았다.</p>
<p>근데 아무 화면도 안 떠서 왜 그런가 확인해보았더니, npm run build는 서버에 올라가는 것을 가정하여 &quot;/&quot;를 경로로 하기 때문이라고 그런다. <a href="https://nuucolog.tistory.com/26">(참고 글)</a>
그래서 <a href="https://stackoverflow.com/questions/43011207/using-homepage-in-package-json-without-messing-up-paths-for-localhost">다른 글</a>과 <a href="https://create-react-app.dev/docs/deployment/">문서</a>도 한번 슬쩍 보면서 상대 경로인 &quot;.&quot;로 바꿔주었다.</p>
<p>그런데도 안된다.
그래서 콘솔창을 열어보니 다음과 같은 것이 뜨는데..</p>
<p><img src="./screenshot4.png" alt="스크린샷4"></p>
<p>해결책을 찾고 다음 포스트에 이어서 하겠다.</p>
</div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"모각소2서블렛useeffect20240127","title":"아주대 모각소 2일차 - useEffect는 2번 렌더링을 한다. \u0026 잡다","date":"2024-01-28","content":"\u003cp\u003e글 게시물이 나오도록 코드를 짠 부분에서, 게시물이 중복되어서 나온다는 현상이 발생되었다.\u003c/p\u003e\n\u003cp\u003e글 게시물을 여러개 나오도록 하는 것에 초점을 맞춰 만들어서, 중복되는지 몰랐는데 운 좋게 팀원이 발견해주었다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./screenshot1.png\" alt=\"스크린샷1\"\u003e\u003c/p\u003e\n\u003cp\u003e현재 db 상에 방 게시물 데이터가 4개 밖에 안 올렸는데, 아래에 방 더보기 버튼이 생겨서 눌러보았더니,\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./screenshot2.png\" alt=\"스크린샷2\"\u003e\u003c/p\u003e\n\u003cp\u003e이렇게 똑같은 방이 또 떠버린다.\n왜 그런 것인가?\u003c/p\u003e\n\u003cp\u003e처음에 방 정보가 없을 때에도 방을 불러올 수 있도록 useEffect에서 방 정보를 가져오는 코드를 넣어놓았었다.\n그래서 데이터를 살펴보기 위해 useEffect 안에 console.log 로 찍어보니, console.log 여러번 수행이 되는 것을 확인할 수 있었다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./screenshot3.png\" alt=\"스크린샷3\"\u003e\u003c/p\u003e\n\u003cp\u003e뭔가 이상한 듯 하여 인터넷에 \u0026quot;리액트 useEffect 2번 돌아감\u0026quot; 이런 느낌으로 검색해보니 strict 모드를 했을 때, 리액트 개발 모드로 돌려서 보면 useEffect가 여러번 호출된다는 것이다.\u003c/p\u003e\n\u003cp\u003e그래서 \u003ccode\u003enpm start\u003c/code\u003e가 아닌, \u003ccode\u003enpm run build\u003c/code\u003e로 돌린 후 index.html로 확인해보았다.\u003c/p\u003e\n\u003cp\u003e근데 아무 화면도 안 떠서 왜 그런가 확인해보았더니, npm run build는 서버에 올라가는 것을 가정하여 \u0026quot;/\u0026quot;를 경로로 하기 때문이라고 그런다. \u003ca href=\"https://nuucolog.tistory.com/26\"\u003e(참고 글)\u003c/a\u003e\n그래서 \u003ca href=\"https://stackoverflow.com/questions/43011207/using-homepage-in-package-json-without-messing-up-paths-for-localhost\"\u003e다른 글\u003c/a\u003e과 \u003ca href=\"https://create-react-app.dev/docs/deployment/\"\u003e문서\u003c/a\u003e도 한번 슬쩍 보면서 상대 경로인 \u0026quot;.\u0026quot;로 바꿔주었다.\u003c/p\u003e\n\u003cp\u003e그런데도 안된다.\n그래서 콘솔창을 열어보니 다음과 같은 것이 뜨는데..\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./screenshot4.png\" alt=\"스크린샷4\"\u003e\u003c/p\u003e\n\u003cp\u003e해결책을 찾고 다음 포스트에 이어서 하겠다.\u003c/p\u003e\n","rawContent":"\r\n글 게시물이 나오도록 코드를 짠 부분에서, 게시물이 중복되어서 나온다는 현상이 발생되었다.\r\n\r\n글 게시물을 여러개 나오도록 하는 것에 초점을 맞춰 만들어서, 중복되는지 몰랐는데 운 좋게 팀원이 발견해주었다.\r\n\r\n![스크린샷1](./screenshot1.png)\r\n\r\n현재 db 상에 방 게시물 데이터가 4개 밖에 안 올렸는데, 아래에 방 더보기 버튼이 생겨서 눌러보았더니,\r\n\r\n![스크린샷2](./screenshot2.png)\r\n\r\n이렇게 똑같은 방이 또 떠버린다.\r\n왜 그런 것인가?\r\n\r\n처음에 방 정보가 없을 때에도 방을 불러올 수 있도록 useEffect에서 방 정보를 가져오는 코드를 넣어놓았었다.\r\n그래서 데이터를 살펴보기 위해 useEffect 안에 console.log 로 찍어보니, console.log 여러번 수행이 되는 것을 확인할 수 있었다.\r\n\r\n![스크린샷3](./screenshot3.png)\r\n\r\n뭔가 이상한 듯 하여 인터넷에 \"리액트 useEffect 2번 돌아감\" 이런 느낌으로 검색해보니 strict 모드를 했을 때, 리액트 개발 모드로 돌려서 보면 useEffect가 여러번 호출된다는 것이다.\r\n\r\n그래서 `npm start`가 아닌, `npm run build`로 돌린 후 index.html로 확인해보았다.\r\n\r\n근데 아무 화면도 안 떠서 왜 그런가 확인해보았더니, npm run build는 서버에 올라가는 것을 가정하여 \"/\"를 경로로 하기 때문이라고 그런다. [(참고 글)](https://nuucolog.tistory.com/26)\r\n그래서 [다른 글](https://stackoverflow.com/questions/43011207/using-homepage-in-package-json-without-messing-up-paths-for-localhost)과 [문서](https://create-react-app.dev/docs/deployment/)도 한번 슬쩍 보면서 상대 경로인 \".\"로 바꿔주었다.\r\n\r\n그런데도 안된다.\r\n그래서 콘솔창을 열어보니 다음과 같은 것이 뜨는데..\r\n\r\n![스크린샷4](./screenshot4.png)\r\n\r\n해결책을 찾고 다음 포스트에 이어서 하겠다.\r\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"모각소2서블렛useeffect20240127"},"buildId":"yXdILxIRu_8nEiVWUUPT_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>