<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>아주대 모각소 4일차 - 모바일 앱 푸시 알람에도 우선순위가 있다<!-- --> - 블로그</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/5602aa092c7bcc8b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5602aa092c7bcc8b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-3c9b553960c0fed5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-87cee5540118d1b4.js" defer=""></script><script src="/_next/static/chunks/996-80bd74c565659df8.js" defer=""></script><script src="/_next/static/chunks/531-58fe6cbf0d1069ee.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-989a8d1ae7a65113.js" defer=""></script><script src="/_next/static/yXdILxIRu_8nEiVWUUPT_/_buildManifest.js" defer=""></script><script src="/_next/static/yXdILxIRu_8nEiVWUUPT_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="blog-content"><a class="back-link" href="/home/">← 목록으로</a><h1>아주대 모각소 4일차 - 모바일 앱 푸시 알람에도 우선순위가 있다</h1><div class="meta">2024년 02월 08일</div><div><p>군에 가기 전부터 지금까지 가족의 요청으로 모바일 웹뷰 앱 관련해서 일을 가끔 하고 있다.
군에 가기 전에는 React Native Expo로 직접 웹뷰 앱을 개발하서 사용하였었는데, 군에 있는 동안 React Native Expo의 체계가 상당히 많이 바뀌어서 기존 코드로는 앱을 빌드할 수 없는 상황이 되어버렸다. 그래서 내가 군에 있는 동안 다른 웹뷰 프레임워크를 도입하게 되었다고 한다.
그래서 전역 후, 그 새로운 웹뷰 프레임워크에 맞춰서 모바일 앱을 출시하게 되었다.</p>
<p>그렇게 활용되고 있는 모바일 웹뷰 앱 중 하나가 푸시 알림을 적극 활용하는데, 그 푸시 알림이 일정하지 않게 사람들에게 도착한다하여 문제가 되었다.
예전에 개발했던 방식이 구글 firebase와 Apple 푸시 관련 서비스에 직접 푸시 알림을 요청했었는데, 이번에는 OneSignal 이라는 푸시를 더 간편하게 보낼 수 있는 서비스를 활용하게 되었다. 안드로이드랑 애플 쪽 푸시 알림을 OneSignal이 중계해서 더 쉽게 한방에 보내주는 듯한 서비스다.</p>
<p>근데 그렇게 해놓으니 푸시 도착하는 시간이 휴대폰마다 제각각 다른 것이 아닌가?
그래서 이번 모각소 시간에 한번 찾아보았다.</p>
<p>그래서 일단 <a href="https://documentation.onesignal.com/docs/notifications-delayed">OneSignal Delayed</a> 공식 문서에 가서 보았더니, 이유가 될만한 것이 상당히 많았다.
첫째, 받는 사람의 네트워크 문제일 수가 있다.
둘째, 자주 사용하지 않는 앱이라 알림 권한이 삭제된 것일 수도 있다.
셋째, 푸시 알람의 우선순위가 문제일 수도 있다.
등등.. 여러 이유가 있어 하나하나 살펴보았다.</p>
<p>먼저 네트워크 문제를 확인하기 위해 같은 네트워크 상에 있는 휴대폰들에 앱을 설치하고 알림 권한도 허용하고 푸시를 날려본 결과, 푸시 알림이 거의 잘 도착했지만 한 사람 휴대폰에서는 푸시 알림이 울리지 않았다.
그래서 그 휴대폰 해당 모바일 앱 권한을 확인해봤는데 권한이 허용되어있었다.
게다가 그 모바일 앱은 출시한지 6개월이 되지 않았다. (앱을 사용을 몇개월 동안 안해야 권한이 삭제된다고 한다.)</p>
<p>그래서 우선순위인 것 같아서 이곳 저곳 영어로도 검색해보기도 한 결과 뭔가 푸시 알림에 우선순위의 속성이 있는 것이 확실해졌다.</p>
<p>현재 푸시 알람을 보내는 방식이, 따로 제작한 관리자 웹사이지에서 OneSignal API로 OneSignal에다가 어떤 알림을 보낼지 날려서, 다시 OneSignal에서 구글과 애플 알림 관련 서비스에 날리고, 거기서 다시 모바일 앱으로 알림을 보내주는 방식이다.</p>
<p>바로 우리의 관리자 웹페이지에서 OneSiganl API로 보내는 코드에, 다음과 같이 priority 속성을 넣어주었다.</p>
<pre><code class="language-json">{
  &quot;app_id&quot;: &quot;YOUR_APP_ID&quot;,
  &quot;included_segments&quot;: [&quot;All&quot;],
  ... 중략 ...
  &quot;priority&quot;: 10
}
</code></pre>
<p>그러니 푸시 알림이 모든 휴대폰에 바로바로 가기 시작했다.</p>
<p>아마 채팅 기능을 만드는 등 신속한 푸시 알림이 필요하면, 이 우선순위 속성을 알고있어야 할 것이다.</p>
</div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"모각소4모바일앱OneSignalPush우선순위20240208","title":"아주대 모각소 4일차 - 모바일 앱 푸시 알람에도 우선순위가 있다","date":"2024-02-08","content":"\u003cp\u003e군에 가기 전부터 지금까지 가족의 요청으로 모바일 웹뷰 앱 관련해서 일을 가끔 하고 있다.\n군에 가기 전에는 React Native Expo로 직접 웹뷰 앱을 개발하서 사용하였었는데, 군에 있는 동안 React Native Expo의 체계가 상당히 많이 바뀌어서 기존 코드로는 앱을 빌드할 수 없는 상황이 되어버렸다. 그래서 내가 군에 있는 동안 다른 웹뷰 프레임워크를 도입하게 되었다고 한다.\n그래서 전역 후, 그 새로운 웹뷰 프레임워크에 맞춰서 모바일 앱을 출시하게 되었다.\u003c/p\u003e\n\u003cp\u003e그렇게 활용되고 있는 모바일 웹뷰 앱 중 하나가 푸시 알림을 적극 활용하는데, 그 푸시 알림이 일정하지 않게 사람들에게 도착한다하여 문제가 되었다.\n예전에 개발했던 방식이 구글 firebase와 Apple 푸시 관련 서비스에 직접 푸시 알림을 요청했었는데, 이번에는 OneSignal 이라는 푸시를 더 간편하게 보낼 수 있는 서비스를 활용하게 되었다. 안드로이드랑 애플 쪽 푸시 알림을 OneSignal이 중계해서 더 쉽게 한방에 보내주는 듯한 서비스다.\u003c/p\u003e\n\u003cp\u003e근데 그렇게 해놓으니 푸시 도착하는 시간이 휴대폰마다 제각각 다른 것이 아닌가?\n그래서 이번 모각소 시간에 한번 찾아보았다.\u003c/p\u003e\n\u003cp\u003e그래서 일단 \u003ca href=\"https://documentation.onesignal.com/docs/notifications-delayed\"\u003eOneSignal Delayed\u003c/a\u003e 공식 문서에 가서 보았더니, 이유가 될만한 것이 상당히 많았다.\n첫째, 받는 사람의 네트워크 문제일 수가 있다.\n둘째, 자주 사용하지 않는 앱이라 알림 권한이 삭제된 것일 수도 있다.\n셋째, 푸시 알람의 우선순위가 문제일 수도 있다.\n등등.. 여러 이유가 있어 하나하나 살펴보았다.\u003c/p\u003e\n\u003cp\u003e먼저 네트워크 문제를 확인하기 위해 같은 네트워크 상에 있는 휴대폰들에 앱을 설치하고 알림 권한도 허용하고 푸시를 날려본 결과, 푸시 알림이 거의 잘 도착했지만 한 사람 휴대폰에서는 푸시 알림이 울리지 않았다.\n그래서 그 휴대폰 해당 모바일 앱 권한을 확인해봤는데 권한이 허용되어있었다.\n게다가 그 모바일 앱은 출시한지 6개월이 되지 않았다. (앱을 사용을 몇개월 동안 안해야 권한이 삭제된다고 한다.)\u003c/p\u003e\n\u003cp\u003e그래서 우선순위인 것 같아서 이곳 저곳 영어로도 검색해보기도 한 결과 뭔가 푸시 알림에 우선순위의 속성이 있는 것이 확실해졌다.\u003c/p\u003e\n\u003cp\u003e현재 푸시 알람을 보내는 방식이, 따로 제작한 관리자 웹사이지에서 OneSignal API로 OneSignal에다가 어떤 알림을 보낼지 날려서, 다시 OneSignal에서 구글과 애플 알림 관련 서비스에 날리고, 거기서 다시 모바일 앱으로 알림을 보내주는 방식이다.\u003c/p\u003e\n\u003cp\u003e바로 우리의 관리자 웹페이지에서 OneSiganl API로 보내는 코드에, 다음과 같이 priority 속성을 넣어주었다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;app_id\u0026quot;: \u0026quot;YOUR_APP_ID\u0026quot;,\n  \u0026quot;included_segments\u0026quot;: [\u0026quot;All\u0026quot;],\n  ... 중략 ...\n  \u0026quot;priority\u0026quot;: 10\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그러니 푸시 알림이 모든 휴대폰에 바로바로 가기 시작했다.\u003c/p\u003e\n\u003cp\u003e아마 채팅 기능을 만드는 등 신속한 푸시 알림이 필요하면, 이 우선순위 속성을 알고있어야 할 것이다.\u003c/p\u003e\n","rawContent":"\r\n군에 가기 전부터 지금까지 가족의 요청으로 모바일 웹뷰 앱 관련해서 일을 가끔 하고 있다.\r\n군에 가기 전에는 React Native Expo로 직접 웹뷰 앱을 개발하서 사용하였었는데, 군에 있는 동안 React Native Expo의 체계가 상당히 많이 바뀌어서 기존 코드로는 앱을 빌드할 수 없는 상황이 되어버렸다. 그래서 내가 군에 있는 동안 다른 웹뷰 프레임워크를 도입하게 되었다고 한다.\r\n그래서 전역 후, 그 새로운 웹뷰 프레임워크에 맞춰서 모바일 앱을 출시하게 되었다.\r\n\r\n그렇게 활용되고 있는 모바일 웹뷰 앱 중 하나가 푸시 알림을 적극 활용하는데, 그 푸시 알림이 일정하지 않게 사람들에게 도착한다하여 문제가 되었다.\r\n예전에 개발했던 방식이 구글 firebase와 Apple 푸시 관련 서비스에 직접 푸시 알림을 요청했었는데, 이번에는 OneSignal 이라는 푸시를 더 간편하게 보낼 수 있는 서비스를 활용하게 되었다. 안드로이드랑 애플 쪽 푸시 알림을 OneSignal이 중계해서 더 쉽게 한방에 보내주는 듯한 서비스다.\r\n\r\n근데 그렇게 해놓으니 푸시 도착하는 시간이 휴대폰마다 제각각 다른 것이 아닌가?\r\n그래서 이번 모각소 시간에 한번 찾아보았다.\r\n\r\n그래서 일단 [OneSignal Delayed](https://documentation.onesignal.com/docs/notifications-delayed) 공식 문서에 가서 보았더니, 이유가 될만한 것이 상당히 많았다.\r\n첫째, 받는 사람의 네트워크 문제일 수가 있다.\r\n둘째, 자주 사용하지 않는 앱이라 알림 권한이 삭제된 것일 수도 있다.\r\n셋째, 푸시 알람의 우선순위가 문제일 수도 있다.\r\n등등.. 여러 이유가 있어 하나하나 살펴보았다.\r\n\r\n먼저 네트워크 문제를 확인하기 위해 같은 네트워크 상에 있는 휴대폰들에 앱을 설치하고 알림 권한도 허용하고 푸시를 날려본 결과, 푸시 알림이 거의 잘 도착했지만 한 사람 휴대폰에서는 푸시 알림이 울리지 않았다.\r\n그래서 그 휴대폰 해당 모바일 앱 권한을 확인해봤는데 권한이 허용되어있었다.\r\n게다가 그 모바일 앱은 출시한지 6개월이 되지 않았다. (앱을 사용을 몇개월 동안 안해야 권한이 삭제된다고 한다.)\r\n\r\n그래서 우선순위인 것 같아서 이곳 저곳 영어로도 검색해보기도 한 결과 뭔가 푸시 알림에 우선순위의 속성이 있는 것이 확실해졌다.\r\n\r\n현재 푸시 알람을 보내는 방식이, 따로 제작한 관리자 웹사이지에서 OneSignal API로 OneSignal에다가 어떤 알림을 보낼지 날려서, 다시 OneSignal에서 구글과 애플 알림 관련 서비스에 날리고, 거기서 다시 모바일 앱으로 알림을 보내주는 방식이다.\r\n\r\n바로 우리의 관리자 웹페이지에서 OneSiganl API로 보내는 코드에, 다음과 같이 priority 속성을 넣어주었다.\r\n\r\n```json\r\n{\r\n  \"app_id\": \"YOUR_APP_ID\",\r\n  \"included_segments\": [\"All\"],\r\n  ... 중략 ...\r\n  \"priority\": 10\r\n}\r\n```\r\n\r\n그러니 푸시 알림이 모든 휴대폰에 바로바로 가기 시작했다.\r\n\r\n아마 채팅 기능을 만드는 등 신속한 푸시 알림이 필요하면, 이 우선순위 속성을 알고있어야 할 것이다.\r\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"모각소4모바일앱OneSignalPush우선순위20240208"},"buildId":"yXdILxIRu_8nEiVWUUPT_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>